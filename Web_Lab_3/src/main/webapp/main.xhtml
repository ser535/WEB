<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
    <title>Лаба по вебу 3</title>

    <style type="text/css">
        .header {
            height: 10vh;
            text-align: center;
            color: black;
            font-family: sans-serif;
            font-size: 15px;
        }

        #git {
            float: right;
            margin-right: 50px;
        }

        .input-block {
            height: 35vh;
            float: left;
            width: 50%;
            border: 2px solid black;
            border-radius: 10px;
            background-color: rgba(255, 255, 255, 0);
        }

        .input-header h2 {
            text-align: center;
        }

        .input-XYR {
            display: flex;
            justify-content: space-between;
            /*  align-items: center; */
        }

        .input-X {
            margin-left: 5%;
        }

        .input-Y {
        }

        .input-R {
            margin-right: 5%;
        }

        .send-button {
            text-align: center;
        }

        .result-block {
            height: 50vh;
            width: 50%;
            float: left;
            border: 2px solid black;
            border-radius: 10px;
            font-size: 20px;
            margin-top: 0.4%;
            box-sizing: border-box;
            overflow-y: auto;
        }

        th, tr, td {
            border: 2px solid black;
            border-radius: 10px;

            /*border-top-left-radius: 10px;*/
            /*border-top-right-radius: 10px;*/
        }

        tr {
        }

        thead {
            /*border-radius: 10px;*/
        }

        /*.bg-above-thead {*/
        /*    position: relative;*/
        /*    background-color: white;*/
        /*    z-index: 3;*/
        /*    width: 100%;*/
        /*    height: 30px;*/

        /*}*/

        #res-table {
            text-align: center;
            margin: auto;
            width: 100%;
            max-width: 100%;
            border-collapse: separate;
            font-size: 20px;
        }


        #res-table thead th {
            position: sticky;
            top: 2px;
            background-color: white;
            z-index: 4;
            border-bottom: 2px solid black;
            box-shadow: 0 2px 3px rgba(0, 0, 0, 0.1);
        }

        .graph-block {
            height: 80vh;
            float: right;
            width: 49%;
            border: 2px solid black;
            border-radius: 10px;
            font-size: 20px;
        }


        .input-log-block {
            margin-top: 0.4%;
            height: 5vh;
            float: right;
            width: 49%;
            border: 2px solid black;
            border-radius: 10px;
            font-size: 20px;
        }

        .graphSVG {
            margin-left: 8%;
            margin-top: 2%;
            width: 100%;
            height: 100%;
        }

        .hidden-form {
            visibility: hidden;
        }

        .session-id{
            float: left;
        }

        .input-log-block {

        }


    </style>
    <h:outputScript library="js" name="main.js"/>
</h:head>
<h:body>
    <div class="content-wrapper">
        <div class="header">
            <h1> Хлопцов Сергей Дмитриевич P3213, вариант 1744</h1>
            <h:outputText styleClass="session-id" value="Session ID: #{deleteOnDisconnect.sessionId}"/>
            <a id="git" href="https://github.com/ser535/WEB">проект на гитхабе</a>
        </div>
        <div class="container">
            <div class="input-block">
                <div class="input-header">
                    <h2>Введите X, Y и R</h2>
                </div>
                <h:form id="mainForm">
                    <div class="input-XYR">
                        <div class="input-X" id="x-coord">
                            <h3>X:</h3>
                            <h:selectOneMenu id="x" value="#{resultsControllerBean.x}" styleClass="selectOneMenu">
                                <f:selectItem itemLabel="-2" itemValue="-2"/>
                                <f:selectItem itemLabel="-1.5" itemValue="-1.5"/>
                                <f:selectItem itemLabel="-1" itemValue="-1"/>
                                <f:selectItem itemLabel="-0.5" itemValue="-0.5"/>
                                <f:selectItem itemLabel="0" itemValue="0"/>
                                <f:selectItem itemLabel="1" itemValue="1"/>
                                <f:selectItem itemLabel="1.5" itemValue="1.5"/>
                                <f:selectItem itemLabel="2" itemValue="2"/>
                            </h:selectOneMenu>
                        </div>

                        <div class="input-Y">
                            <h3>Y (-3 ... 5):</h3>
                            <h:inputText id="y" value="#{resultsControllerBean.y}" styleClass="inputText">
                                <f:validateDoubleRange minimum="-3" maximum="5"/>
                            </h:inputText>
                        </div>

                        <div class="input-R" id="r-val">
                            <h3>R:</h3>
                            <h:selectOneMenu id="r" value="#{resultsControllerBean.r}" styleClass="selectOneMenu">
                                <f:selectItem itemLabel="1" itemValue="1"/>
                                <f:selectItem itemLabel="1.5" itemValue="1.5"/>
                                <f:selectItem itemLabel="2" itemValue="2"/>
                                <f:selectItem itemLabel="2.5" itemValue="2.5"/>
                                <f:selectItem itemLabel="3" itemValue="3"/>
                            </h:selectOneMenu>
                        </div>
                    </div>

                    <div class="send-button">
                        <br></br> <br></br>
                        <h:commandButton id="submit-btn" value="Проверить" styleClass="mybutton">
                            <f:ajax execute="@form"
                                    listener="#{resultsControllerBean.checkPoint(resultsControllerBean.x, resultsControllerBean.y, resultsControllerBean.r)}"
                                    render=":res-table" onevent="handleTableUpdate"/>
                        </h:commandButton>
                    </div>

                    <div style="text-align: center; margin-top: 20px;">
                        <h:commandButton action="index?faces-redirect=true" value="Вернуться на стартовую страницу"
                                         styleClass="backButton"
                                         immediate="true" />
                    </div>

                    <div class="hidden-form">
                        <h:inputText id="hidden-x" value="#{resultsControllerBean.hiddenX}" styleClass="inputText">
                        </h:inputText>

                        <h:inputText id="hidden-y" value="#{resultsControllerBean.hiddenY}" styleClass="inputText">
                        </h:inputText>

                        <h:commandButton id="submit-hidden-btn" value="Проверить" styleClass="mybutton">
                            <f:ajax execute="@form"
                                    listener="#{resultsControllerBean.checkPoint(resultsControllerBean.hiddenX, resultsControllerBean.hiddenY, resultsControllerBean.r)}"
                                    render=":res-table" onevent="handleTableUpdate"/>
                        </h:commandButton>
                    </div>
                </h:form>
            </div>

            <div class="graph-block">
                <svg class="graphSVG" id="graph" width="650" height="650"
                     onclick="handleGraphClick(event)">
                    <line stroke="gray" x1="0" x2="600" y1="300" y2="300"/>
                    <line stroke="gray" x1="300" x2="300" y1="0" y2="600"/>
                    <polygon points="300,0 294,15 306,15" stroke="white"/>
                    <polygon points="600,300 585,306 585,294" stroke="white"/>

                    <line stroke="gray" x1="400" x2="400" y1="310" y2="290"/>
                    <line stroke="gray" x1="500" x2="500" y1="310" y2="290"/>

                    <line stroke="gray" x1="200" x2="200" y1="310" y2="290"/>
                    <line stroke="gray" x1="100" x2="100" y1="310" y2="290"/>

                    <line stroke="gray" x1="290" x2="310" y1="100" y2="100"/>
                    <line stroke="gray" x1="290" x2="310" y1="200" y2="200"/>

                    <line stroke="gray" x1="290" x2="310" y1="400" y2="400"/>
                    <line stroke="gray" x1="290" x2="310" y1="500" y2="500"/>

                    <text x="385" y="280">R/2</text>
                    <text x="495" y="280">R</text>

                    <text x="90" y="280">-R</text>
                    <text x="180" y="280">-R/2</text>

                    <text x="320" y="205">R/2</text>
                    <text x="320" y="105">R</text>

                    <text x="320" y="405">-R/2</text>
                    <text x="320" y="505">-R</text>

                    <text x="310" y="15">Y</text>
                    <text x="585" y="290">X</text>


                    <rect x="300" y="300" width="100" height="200" fill="#0a0eff" fill-opacity="0.1" stroke="#0c0fff"/>

                    <polygon points="300,200 400,300 300,300" fill="#0a0eff" fill-opacity="0.1" stroke="#0c0fff"/>

                    <path d="M 200 300 A 100 100, 0, 0, 1, 300 200 L 300 300 Z" fill="#0a0eff" fill-opacity="0.1"
                          stroke="#0c0fff"></path>

                    <circle cx="-300" cy="300" class="dot" id="dot" r="5" visibility="visible" stroke="black"
                            fill="black"
                            stroke-opacity="0" fill-opacity="50"></circle>
                </svg>
            </div>

            <div class="result-block">
                <div class="bg-above-thead">
                </div>
                <h:dataTable id="res-table" value="#{resultsControllerBean.results}" var="res"
                             styleClass="results-table">
                    <h:column>
                        <f:facet name="header">X</f:facet>
                        #{res.x}
                    </h:column>
                    <h:column>
                        <f:facet name="header">Y</f:facet>
                        #{res.y}
                    </h:column>
                    <h:column>
                        <f:facet name="header">R</f:facet>
                        #{res.r}
                    </h:column>
                    <h:column>
                        <f:facet name="header">Попадание</f:facet>
                        #{res.result ? 'Да' : 'Нет'}
                    </h:column>
                </h:dataTable>
            </div>
            <div class="input-log-block" id="input-log">

            </div>
        </div>
    </div>
</h:body>
</html>